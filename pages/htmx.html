<!doctype html>
<html>

<head>
  <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.6/dist/htmx.min.js"></script>
  <script type="module">
    import { run } from "./common.js";
    let _resolve;
    htmx.on("htmx:afterSwap", () => _resolve?.());
    window.start = size => run("htmx", done => {
      _resolve = done;
      htmx.ajax("GET", `/snippet/${size}?bust=` + Math.random(), "#target");
    });
  </script>
</head>

<body>
  <button onclick="start('small')">Run small</button>
  <button onclick="start('big')">Run big</button>
  <div id="target"></div>
</body>

</html>