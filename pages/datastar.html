<!doctype html>
<html>

<head>
  <script type="module" src="https://cdn.jsdelivr.net/gh/starfederation/datastar@main/bundles/datastar.js"></script>
  <script type="module">
    import { run } from "./common.js";

    window.start = size => run("datastar", done => {
      window._resolve = done;
    });
  </script>
</head>

<body>
  <button data-on-click="start('small'); @get(`/snippet/small?bust=${Math.random()}`)"
    data-on-datastar-fetch="evt.detail.type === 'finished' && window._resolve?.()">Run small</button>
  <button data-on-click="start('big'); @get(`/snippet/big?bust=${Math.random()}`)"
    data-on-datastar-fetch="evt.detail.type === 'finished' && window._resolve?.()">Run big</button>

  <div id="target"></div>
</body>

</html>