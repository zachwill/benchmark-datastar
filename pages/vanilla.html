<!doctype html>
<html>

<head>
  <script src="https://cdn.jsdelivr.net/npm/idiomorph@0.7.3/dist/idiomorph.min.js"></script>
  <script type="module">
    import { benchmark } from "./common.js";

    let currentStartTime = null;

    // Handle button clicks and capture start timestamp
    document.addEventListener('click', async function (event) {
      currentStartTime = event.timeStamp;
      const size = event.target.id;

      // Fetch the HTML content
      const response = await fetch(`/snippet/${size}?bust=` + Math.random());
      const html = await response.text();

      // Replace the target element's innerHTML
      const targetElement = document.getElementById('target');
      targetElement.innerHTML = html;

      // Capture end timestamp and benchmark
      const endTime = performance.now();
      benchmark('vanilla', currentStartTime, endTime);
      currentStartTime = null;
    });
  </script>
</head>

<body>
  <button id="small">Run small</button>
  <button id="big">Run big</button>
  <div id="target"></div>
</body>

</html>